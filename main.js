(()=>{"use strict";class t{static typeFields=new Map([["id",{format:t=>`#${t}`,isString:!1}],["title",{format:t=>t,isString:!0}],["year",{format:t=>`(${t})`,isString:!1}],["imdb",{format:t=>`imdb: ${t.toFixed(2)}`,isString:!1}]]);constructor(t){this.table=this.createTable(t)}createTable(e){const n=document.createElement("table"),i=document.createElement("thead"),d=document.createElement("tr");for(const e of t.typeFields.keys()){const t=document.createElement("th");t.textContent=e,d.appendChild(t)}i.appendChild(d),n.appendChild(i);const s=document.createElement("tbody");for(const n of e){const e=document.createElement("tr");for(const i of t.typeFields.keys()){e.dataset[i]=n[i];const d=document.createElement("td");d.textContent=t.typeFields.get(i).format(n[i]),e.appendChild(d)}s.appendChild(e)}return n.appendChild(s),document.documentElement.children[1].appendChild(n),n}sortingTable(e,n){const i=[...this.table.children[1].children];n?t.typeFields.get(e).isString?i.sort(((t,n)=>t.dataset[e].localeCompare(n.dataset[e]))):i.sort(((t,n)=>t.dataset[e]-n.dataset[e])):t.typeFields.get(e).isString?i.sort(((t,n)=>n.dataset[e].localeCompare(t.dataset[e]))):i.sort(((t,n)=>n.dataset[e]-t.dataset[e]));for(let t=0;t<this.table.children[1].children.length;t++)this.table.children[1].children[t]!=i[t]&&this.table.children[1].insertBefore(i[t],this.table.children[1].children[t]);const d=this.table.children[0].children[0].children;for(const t of d)t.classList.remove("sort-ascending","sort-descending"),t.textContent===e&&(n?t.classList.add("sort-ascending"):t.classList.add("sort-descending"))}*sortDisplayGenerator(){for(;;)for(const e of t.typeFields.keys())this.sortingTable(e,!0),yield,this.sortingTable(e,!1),yield}}const e=[{id:26,title:"Побег из Шоушенка",imdb:9.3,year:1994},{id:25,title:"Крёстный отец",imdb:9.2,year:1972},{id:27,title:"Крёстный отец 2",imdb:9,year:1974},{id:1047,title:"Тёмный рыцарь",imdb:9,year:2008},{id:223,title:"Криминальное чтиво",imdb:8.9,year:1994}];document.addEventListener("DOMContentLoaded",(()=>{const n=new t(e).sortDisplayGenerator();setInterval((()=>{n.next()}),3e3)}))})();